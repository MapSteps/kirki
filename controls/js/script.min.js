if(_.isUndefined(window.kirkiSetSettingValue))var kirkiSetSettingValue={set:function(i,a){var e,n=this,t=wp.customize.settings.controls[i];if(_.isUndefined(t))return!0;switch(n.setValue(i,a),t.type){case"kirki-background":_.isUndefined(a["background-color"])||n.setColorPicker(n.findElement(i,".kirki-color-control"),a["background-color"]),n.findElement(i,".placeholder, .thumbnail").removeClass().addClass("placeholder").html("No file selected"),_.each(["background-repeat","background-position"],function(e){_.isUndefined(a[e])||n.setSelectWoo(n.findElement(i,"."+e+" select"),a[e])}),_.each(["background-size","background-attachment"],function(e){jQuery(n.findElement(i,"."+e+' input[value="'+a+'"]')).prop("checked",!0)}),e=JSON.stringify(a).replace(/'/g,"&#39"),jQuery(n.findElement(i,".background-hidden-value").attr("value",e)).trigger("change");break;case"kirki-code":jQuery(n.findElement(i,".CodeMirror"))[0].CodeMirror.setValue(a);break;case"checkbox":case"kirki-switch":case"kirki-toggle":a=1===a||"1"===a||!0===a,jQuery(n.findElement(i,"input")).prop("checked",a),wp.customize.instance(i).set(a);break;case"kirki-select":case"kirki-fontawesome":n.setSelectWoo(n.findElement(i,"select"),a);break;case"kirki-slider":jQuery(n.findElement(i,"input")).prop("value",a),jQuery(n.findElement(i,".kirki_range_value .value")).html(a);break;case"kirki-generic":(_.isUndefined(t.choices)||_.isUndefined(t.choices.element))&&(t.choices.element="input"),jQuery(n.findElement(i,t.choices.element)).prop("value",a);break;case"kirki-color":n.setColorPicker(n.findElement(i,".kirki-color-control"),a);break;case"kirki-multicheck":n.findElement(i,"input").each(function(){jQuery(this).prop("checked",!1)}),_.each(a,function(e,t){jQuery(n.findElement(i,'input[value="'+a[t]+'"]')).prop("checked",!0)});break;case"kirki-multicolor":_.each(a,function(e,t){n.setColorPicker(n.findElement(i,".multicolor-index-"+t),e)});break;case"kirki-radio-buttonset":case"kirki-radio-image":case"kirki-radio":case"kirki-dashicons":case"kirki-color-palette":case"kirki-palette":jQuery(n.findElement(i,'input[value="'+a+'"]')).prop("checked",!0);break;case"kirki-typography":_.each(["font-family","variant"],function(e){_.isUndefined(a[e])||n.setSelectWoo(n.findElement(i,"."+e+" select"),a[e])}),_.each(["font-size","line-height","letter-spacing","word-spacing"],function(e){_.isUndefined(a[e])||jQuery(n.findElement(i,"."+e+" input")).prop("value",a[e])}),_.isUndefined(a.color)||n.setColorPicker(n.findElement(i,".kirki-color-control"),a.color),e=JSON.stringify(a).replace(/'/g,"&#39"),jQuery(n.findElement(i,".typography-hidden-value").attr("value",e)).trigger("change");break;case"kirki-dimensions":_.each(a,function(e,t){jQuery(n.findElement(i,"."+t+" input")).prop("value",e)});break;case"kirki-repeater":case"kirki-custom":break;default:jQuery(n.findElement(i,"input")).prop("value",a)}},setColorPicker:function(e,t){e.attr("data-default-color",t).data("default-color",t).wpColorPicker("color",t)},setSelectWoo:function(e,t){jQuery(e).selectWoo().val(t).trigger("change")},setTextarea:function(e,t){jQuery(e).prop("value",t)},findElement:function(e,t){return wp.customize.control(e).container.find(t)},setValue:function(e,t,i){i=_.isUndefined(i)?100:parseInt(i,10),wp.customize.instance(e).set({}),setTimeout(function(){wp.customize.instance(e).set(t)},i)}};(kirki={initialized:!1,initialize:function(){this.initialized||(setTimeout(function(){kirki.util.webfonts.standard.initialize(),kirki.util.webfonts.google.initialize()},150),this.initialized=!0)}}).initialize();var kirki=kirki||{};kirki=(kirki=jQuery.extend(kirki,{control:{"kirki-radio":{init:function(e){this.template(e),kirki.input.radio.init(e)},template:function(e){var t=wp.template("kirki-input-radio");e.container.html(t({label:e.params.label,description:e.params.description,"data-id":e.id,inputAttrs:e.params.inputAttrs,default:e.params.default,value:kirki.setting.get(e.id),choices:e.params.choices}))}},"kirki-color":{init:function(e){this.template(e),kirki.input.color.init(e)},template:function(e){var t=wp.template("kirki-input-color");e.container.html(t({label:e.params.label,description:e.params.description,"data-id":e.id,mode:e.params.mode,inputAttrs:e.params.inputAttrs,"data-palette":e.params.palette,"data-default-color":e.params.default,"data-alpha":e.params.choices.alpha,value:kirki.setting.get(e.id)}))}},"kirki-generic":{init:function(e){this.template(e),_.isUndefined(e.params)||_.isUndefined(e.params.choices)||_.isUndefined(e.params.choices.element)||"textarea"!==e.params.choices.element?kirki.input.genericInput.init(e):kirki.input.textarea.init(e)},template:function(e){var t,i={label:e.params.label,description:e.params.description,"data-id":e.id,inputAttrs:e.params.inputAttrs,choices:e.params.choices,value:kirki.setting.get(e.id)};if(!_.isUndefined(e.params)&&!_.isUndefined(e.params.choices)&&!_.isUndefined(e.params.choices.element)&&"textarea"===e.params.choices.element)return t=wp.template("kirki-input-textarea"),void e.container.html(t(i));t=wp.template("kirki-input-generic"),e.container.html(t(i))}},"kirki-number":{init:function(e){this.template(e),kirki.input.number.init(e)},template:function(e){var t=wp.template("kirki-input-number");e.container.html(t(args={label:e.params.label,description:e.params.description,"data-id":e.id,inputAttrs:e.params.inputAttrs,choices:e.params.choices,value:kirki.setting.get(e.id)}))}},"kirki-image":{init:function(e){this.template(e),kirki.input.image.init(e)},template:function(e){var t=wp.template("kirki-input-image");e.container.html(t(args={label:e.params.label,description:e.params.description,"data-id":e.id,inputAttrs:e.params.inputAttrs,choices:e.params.choices,value:kirki.setting.get(e.id)}))}},"kirki-select":{init:function(e){this.template(e),kirki.input.select.init(e)},template:function(e){var t=wp.template("kirki-input-select");e.container.html(t({label:e.params.label,description:e.params.description,"data-id":e.id,inputAttrs:e.params.inputAttrs,choices:e.params.choices,value:kirki.setting.get(e.id),multiple:e.params.multiple||1,placeholder:e.params.placeholder}))}}}}))||{},kirki=(kirki=jQuery.extend(kirki,{input:{radio:{init:function(e){jQuery('input[data-id="'+e.id+'"]').on("change keyup paste click",function(){kirki.setting.set(e.id,jQuery(this).val())})}},color:{init:function(e){var t,i=jQuery('.kirki-color-control[data-id="'+e.id+'"]');e.choices=e.choices||{},_.isEmpty(e.choices)&&e.params.choices&&(e.choices=e.params.choices),_.isEmpty(e.choices)||i.wpColorPicker(e.choices),setTimeout(function(){(t=jQuery('.kirki-input-container[data-id="'+e.id+'"] .wp-picker-clear')).length&&t.click(function(){kirki.setting.set(e.id,"")})},200),i.wpColorPicker({change:function(){setTimeout(function(){kirki.setting.set(e.id,i.val())},20)}})}},genericInput:{init:function(e){jQuery('input[data-id="'+e.id+'"]').on("change keyup paste click",function(){kirki.setting.set(e.id,jQuery(this).val())})}},textarea:{init:function(e){jQuery('textarea[data-id="'+e.id+'"]').on("change keyup paste click",function(){kirki.setting.set(e.id,jQuery(this).val())})}},select:{init:function(e){var t,i=jQuery('select[data-id="'+e.id+'"]'),a=parseInt(i.data("multiple"),10),n={escapeMarkup:function(e){return e}};e.params.placeholder&&(n.placeholder=e.params.placeholder,n.allowClear=!0),1<a&&(n.maximumSelectionLength=a),jQuery(i).selectWoo(n).on("change",function(){t=null===(t=jQuery(this).val())&&1<a?[]:t,kirki.setting.set(e.id,t)})}},number:{init:function(i){var e,t,a=jQuery('input[data-id="'+i.id+'"]'),n=i.setting._value;i.params.choices=_.defaults(i.params.choices,{min:0,max:100,step:1}),(isNaN(n)||""===n)&&(n=i.params.choices.min<0&&0<i.params.choices.max?0:i.params.choices.min),n=parseFloat(n),i.params.choices.step="any"===i.params.choices.step?.001:i.params.choices.step,i.params.choices.min=parseFloat(i.params.choices.min),i.params.choices.max=parseFloat(i.params.choices.max),i.params.choices.step=parseFloat(i.params.choices.step),e=jQuery('.kirki-input-container[data-id="'+i.id+'"] .plus'),t=jQuery('.kirki-input-container[data-id="'+i.id+'"] .minus'),e.click(function(){var e,t=parseFloat(a.val());e=t>=i.params.choices.max?t:t+i.params.choices.step,a.val(e),a.trigger("change")}),t.click(function(){var e,t=parseFloat(a.val());e=t<=i.params.choices.min?t:t-i.params.choices.step,a.val(e),a.trigger("change")}),a.on("change keyup paste click",function(){kirki.setting.set(i.id,jQuery(this).val())})}},image:{init:function(n){var t=kirki.setting.get(n.id),a=_.isUndefined(n.params.choices)||_.isUndefined(n.params.choices.save_as)?"url":n.params.choices.save_as,r=n.container.find(".placeholder, .thumbnail"),e="array"===a?t.url:t,o=n.container.find(".image-upload-remove-button"),s=n.container.find(".image-default-button");t="array"===a&&_.isString(t)?{url:t}:t,"id"!==a&&"ID"!==a||""===t||wp.media.attachment(t).fetch().then(function(){setTimeout(function(){var e=wp.media.attachment(t).get("url");r.removeClass().addClass("thumbnail thumbnail-image").html('<img src="'+e+'" alt="" />')},700)}),("url"===a&&""!==t||"array"===a&&!_.isUndefined(t.url)&&""!==t.url)&&n.container.find("image-default-button").hide(),("url"===a&&""===t||"array"===a&&(_.isUndefined(t.url)||""===t.url))&&o.hide(),t===n.params.default&&n.container.find("image-default-button").hide(),""!==e&&r.removeClass().addClass("thumbnail thumbnail-image").html('<img src="'+e+'" alt="" />'),n.container.on("click",".image-upload-button",function(e){var i=wp.media({multiple:!1}).open().on("select",function(){var e=i.state().get("selection").first().toJSON(),t=e.url;_.isUndefined(e.sizes)||(previewImg=e.sizes.full.url,_.isUndefined(e.sizes.medium)?_.isUndefined(e.sizes.thumbnail)||(t=e.sizes.thumbnail.url):t=e.sizes.medium.url),"array"===a?kirki.setting.set(n.id,{id:e.id,url:e.sizes.full.url,width:e.width,height:e.height}):"id"===a?kirki.setting.set(n.id,e.id):kirki.setting.set(n.id,_.isUndefined(e.sizes)?e.url:e.sizes.full.url),r.length&&r.removeClass().addClass("thumbnail thumbnail-image").html('<img src="'+t+'" alt="" />'),o.length&&(o.show(),s.hide())});e.preventDefault()}),n.container.on("click",".image-upload-remove-button",function(e){var t,i,a;e.preventDefault(),kirki.setting.set(n.id,""),t=n.container.find(".placeholder, .thumbnail"),i=n.container.find(".image-upload-remove-button"),a=n.container.find(".image-default-button"),t.length&&t.removeClass().addClass("placeholder").html(kirkiL10n.noFileSelected),i.length&&(i.hide(),jQuery(a).hasClass("button")&&a.show())}),n.container.on("click",".image-default-button",function(e){var t,i,a;e.preventDefault(),kirki.setting.set(n.id,n.params.default),t=n.container.find(".placeholder, .thumbnail"),i=n.container.find(".image-upload-remove-button"),a=n.container.find(".image-default-button"),t.length&&t.removeClass().addClass("thumbnail thumbnail-image").html('<img src="'+n.params.default+'" alt="" />'),i.length&&(i.show(),a.hide())})}}}}))||{},kirki=(kirki=jQuery.extend(kirki,{setting:{get:function(e){var t=e.split("["),i="",a=0,n="";return _.each(t,function(e,t){e=e.replace("]",""),0===t?i=e:i+="["+e+"]",_.isUndefined(wp.customize.instance(i))||(n=wp.customize.instance(i).get(),a=t),a<t&&_.isObject(n)&&!_.isUndefined(n[e])&&(n=n[e])}),n},set:function(e,t,i){var a,n,r,o,s,l="",c="",u={};a=e,_.isObject(e)&&(a=jQuery(e).attr("data-id")?e.attr("data-id"):e.parents("[data-id]").attr("data-id")),void 0===wp.customize.control(a)?(n=a.split("["),_.each(n,function(e,t){e=e.replace("]",""),l=0===t?e:"["+e+"]",_.isUndefined(wp.customize.instance(l))||(c=l,r=wp.customize.instance(c).get())}),""!==(o=a.replace(c,""))?(_.isObject(r)||(r={}),"["===o.charAt(0)&&(o=o.replace("[","")),s=o.split("["),_.each(s,function(e,t){s[t]=e.replace("]","")}),i&&s.push(i),u='{"'+s.join('":{"')+'":"'+t+'"'+"}".repeat(s.length),u=JSON.parse(u),jQuery.extend(!0,r,u),t=r):i&&((r=_.isObject(r)?r:{})[i]=t,t=r),wp.customize.control(c).setting.set(t)):wp.customize.control(a).setting.set(t)}}}))||{};kirki=jQuery.extend(kirki,{util:{media_query_devices:{global:null,desktop:0,tablet:1,mobile:2},media_query_device_names:["global","desktop","tablet","mobile"],webfonts:{google:{fonts:{},initialize:function(){this.setFonts()},setFonts:function(){var t=this;_.isEmpty(t.fonts)&&jQuery.post(ajaxurl,{action:"kirki_fonts_google_all_get"},function(e){t.fonts=JSON.parse(e)})},getFont:function(e){var t=this.getFonts();return void 0!==t[e]&&t[e]},getFonts:function(e,i,t){var a=this,n={},r={},o={};return e="alpha"!==(e=e||"alpha")&&"popularity"!==e&&"trending"!==e?"alpha":e,t=t||0,t=parseInt(t,10),"alpha"===e?n=jQuery.extend({},a.fonts.items):_.each(a.fonts.order[e],function(e){n[e]=a.fonts.items[e]}),""!==i&&i?_.each(n,function(e,t){i===e.category&&(r[t]=e)}):r=n,0<t?(_.each(_.first(_.keys(r),t),function(e){o[e]=r[e]}),o):r},getVariants:function(e){var t=this.getFont(e);return!!t&&(!_.isUndefined(t.variants)&&t.variants)}},standard:{fonts:{},initialize:function(){this.setFonts()},setFonts:function(){var t=this;_.isEmpty(t.fonts)&&jQuery.post(ajaxurl,{action:"kirki_fonts_standard_all_get"},function(e){t.fonts=JSON.parse(e)})},getVariants:function(){return["regular","italic","700","700italic"]}},getFontType:function(e){return void 0!==this.standard.fonts[e]||void 0!==this.standard.fonts.stack&&void 0!==this.standard.fonts.stack[e]?"standard":void 0!==this.google.fonts.items[e]&&"google"}},validate:{cssValue:function(e){var t,i;return void 0===e||(0===e||"0"===e||"auto"===e||"inherit"===e||"initial"===e||(0<=e.indexOf("calc(")&&0<=e.indexOf(")")||(t=parseFloat(e),i=e.replace(t,""),e?!isNaN(t)&&-1<jQuery.inArray(i,["fr","rem","em","ex","%","px","cm","mm","in","pt","pc","ch","vh","vw","vmin","vmax"]):void 0)))}},helpers:{media_query:function(e,o,s){var l=function(e){jQuery(".kirki-responsive-switchers").trigger("breakpoint_changed",[e])},c=$("#customize-footer-actions");if(!_.isUndefined(e.params.choices.use_media_queries)&&e.params.choices.use_media_queries){e.container.find(".kirki-responsive-switchers").each(function(){var e=$(this),t=e.find("li.desktop"),i=e.find("li.tablet"),a=e.find("li.mobile"),n=o,r=function(e){0==e?i.hasClass("active")||a.hasClass("active")?(i.removeClass("active"),a.removeClass("active")):(t.toggleClass("multiple"),t.hasClass("multiple")?(n=!0,i.removeClass("hidden"),a.removeClass("hidden")):(n=!1,i.addClass("hidden"),a.addClass("hidden"))):1==e?(n||(n=!0,i.removeClass("hidden"),a.removeClass("hidden"),t.addClass("multiple")),a.removeClass("active"),i.addClass("active")):2==e&&(n||(n=!0,i.removeClass("hidden"),a.removeClass("hidden"),t.addClass("multiple")),i.removeClass("active"),a.addClass("active")),setTimeout(function(){s.device_change(n,e)},200)};n&&r(0),e.on("breakpoint_changed",function(e,t){r(t)}),t.click(function(e){e.stopPropagation(),l(0),c.addClass("skip-trigger"),u.click()}),i.click(function(e){e.stopPropagation(),l(1),c.addClass("skip-trigger"),d.click()}),a.click(function(e){e.stopPropagation(),l(2),c.addClass("skip-trigger"),p.click()})});var u=jQuery("button.preview-desktop"),d=jQuery("button.preview-tablet"),p=jQuery("button.preview-mobile");if(!c.hasClass("media-query-callback")){var t=function(e){c.hasClass("skip-trigger")?c.removeClass("skip-trigger"):l(e)};c.addClass("media-query-callback"),u.click(function(e){e.stopPropagation(),t(0)}),d.click(function(e){e.stopPropagation(),t(1)}),p.click(function(e){e.stopPropagation(),t(2)})}}},unit_select:function(e,t){var i=e.container,a=jQuery('.kirki-units-choices input[type="radio"]',i);t.selected_unit?a.filter('[value="'+t.selected_unit+'"]').click():a.first().click(),last_unit=a.filter(":checked").val(),a.on("change",function(){var e=$(this).val();t.unit_changed&&t.unit_changed(e)})}},parseHtmlEntities:function(e){return(new DOMParser).parseFromString("<!doctype html><body>"+e,"text/html").body.textContent},parseNumber:function(e){if(void 0===e)return"";var t=e.toString().match(/[0-9]\d{0,9}(\.\d{1,3})?%?/gm);return t?t[0]:null}}}),function(){"use strict";wp.customize.kirkiDynamicControl=wp.customize.Control.extend({initialize:function(e,t){var i=t||{};i.params=i.params||{},i.params.type||(i.params.type="kirki-generic"),i.params.content||(i.params.content=jQuery("<li></li>"),i.params.content.attr("id","customize-control-"+e.replace(/]/g,"").replace(/\[/g,"-")),i.params.content.attr("class","customize-control customize-control-"+i.params.type)),this.propertyElements=[],wp.customize.Control.prototype.initialize.call(this,e,i)},_setUpSettingRootLinks:function(){var a=this;a.container.find("[data-customize-setting-link]").each(function(){var i=jQuery(this);wp.customize(i.data("customizeSettingLink"),function(e){var t=new wp.customize.Element(i);a.elements.push(t),t.sync(e),t.set(e())})})},_setUpSettingPropertyLinks:function(){var a=this;a.setting&&a.container.find("[data-customize-setting-property-link]").each(function(){var t,e=jQuery(this),i=e.data("customizeSettingPropertyLink");t=new wp.customize.Element(e),a.propertyElements.push(t),t.set(a.setting()[i]),t.bind(function(e){var t=a.setting();e!==t[i]&&((t=_.clone(t))[i]=e,a.setting.set(t))}),a.setting.bind(function(e){e[i]!==t.get()&&t.set(e[i])})})},ready:function(){var e=this;e._setUpSettingRootLinks(),e._setUpSettingPropertyLinks(),wp.customize.Control.prototype.ready.call(e),e.deferred.embedded.done(function(){e.initKirkiControl(e)})},embed:function(){var t=this,e=t.section();e&&wp.customize.section(e,function(e){"kirki-expanded"===e.params.type||e.expanded()||wp.customize.settings.autofocus.control===t.id?t.actuallyEmbed():e.expanded.bind(function(e){e&&t.actuallyEmbed()})})},actuallyEmbed:function(){"resolved"!==this.deferred.embedded.state()&&(this.renderContent(),this.deferred.embedded.resolve())},focus:function(e){this.actuallyEmbed(),wp.customize.Control.prototype.focus.call(this,e)},initKirkiControl:function(e){void 0===kirki.control[e.params.type]?this.container.on("change keyup paste click","input",function(){e.setting.set(jQuery(this).val())}):kirki.control[e.params.type].init(e)}})}(),_.each(kirki.control,function(e,t){wp.customize.controlConstructor[t]=wp.customize.kirkiDynamicControl.extend({})}),wp.customize.controlConstructor["kirki-background"]=wp.customize.Control.extend({ready:function(){"use strict";!_.isUndefined(window.kirkiControlLoader)&&_.isFunction(kirkiControlLoader)?kirkiControlLoader(this):this.initKirkiControl()},initKirkiControl:function(){var o=this,e=o.setting._value,t=o.container.find(".kirki-color-control");(_.isUndefined(e["background-image"])||""===e["background-image"])&&(o.container.find(".background-wrapper > .background-repeat").hide(),o.container.find(".background-wrapper > .background-position").hide(),o.container.find(".background-wrapper > .background-size").hide(),o.container.find(".background-wrapper > .background-attachment").hide()),t.wpColorPicker({change:function(){setTimeout(function(){o.saveValue("background-color",t.val())},100)}}),o.container.on("change",".background-repeat select",function(){o.saveValue("background-repeat",jQuery(this).val())}),o.container.on("change click",".background-size input",function(){o.saveValue("background-size",jQuery(this).val())}),o.container.on("change",".background-position select",function(){o.saveValue("background-position",jQuery(this).val())}),o.container.on("change click",".background-attachment input",function(){o.saveValue("background-attachment",jQuery(this).val())}),o.container.on("click",".background-image-upload-button",function(e){var r=wp.media({multiple:!1}).open().on("select",function(){var e,t,i,a=r.state().get("selection").first(),n=a.toJSON().sizes.full.url;_.isUndefined(a.toJSON().sizes.medium)?_.isUndefined(a.toJSON().sizes.thumbnail)||(n=a.toJSON().sizes.thumbnail.url):n=a.toJSON().sizes.medium.url,e=a.toJSON().sizes.full.url,a.toJSON().id,a.toJSON().width,a.toJSON().height,""!==e&&o.container.find(".background-wrapper > .background-repeat, .background-wrapper > .background-position, .background-wrapper > .background-size, .background-wrapper > .background-attachment").show(),o.saveValue("background-image",e),t=o.container.find(".placeholder, .thumbnail"),i=o.container.find(".background-image-upload-remove-button"),t.length&&t.removeClass().addClass("thumbnail thumbnail-image").html('<img src="'+n+'" alt="" />'),i.length&&i.show()});e.preventDefault()}),o.container.on("click",".background-image-upload-remove-button",function(e){var t,i;e.preventDefault(),o.saveValue("background-image",""),t=o.container.find(".placeholder, .thumbnail"),i=o.container.find(".background-image-upload-remove-button"),o.container.find(".background-wrapper > .background-repeat").hide(),o.container.find(".background-wrapper > .background-position").hide(),o.container.find(".background-wrapper > .background-size").hide(),o.container.find(".background-wrapper > .background-attachment").hide(),t.length&&t.removeClass().addClass("placeholder").html("No file selected"),i.length&&i.hide()})},saveValue:function(e,t){var i=jQuery("#customize-control-"+this.id.replace("[","-").replace("]","")+" .background-hidden-value"),a=this.setting._value;a[e]=t,jQuery(i).attr("value",JSON.stringify(a)).trigger("change"),this.setting.set(a)}}),wp.customize.controlConstructor["kirki-border"]=wp.customize.kirkiDynamicControl.extend({initKirkiControl:function(){var i=this,e=i.container,t=jQuery(".border-style select",e),a=jQuery(".kirki-control-dimension input",e),n=jQuery(".kirki-input-link",e),r=jQuery(".color input",e),o=!_.isUndefined(i.params.choices.units),s=i.setting._value;(i.has_units=o)||a.attr("type","text"),!s&&i.params.default&&(s=i.params.default,_.isUndefined(s.unit)&&(s.unit=jQuery('.kirki-units-choices input[type="radio"]:first',e).val())),s?(t.val(s.style||"none"),i.fill_inputs(s)):t.val("none"),r.attr("data-default-color",s.color).data("default-color",s.color).val(s.color).wpColorPicker({change:function(e,t){setTimeout(function(){i.save()},100)},clear:function(e){setTimeout(function(){i.save()},100)}}),o&&kirki.util.helpers.unit_select(i,{selected_unit:s.unit,unit_changed:function(e){i.save()}}),t.change(function(e){e.preventDefault(),i.toggle_visibility(t),i.save()}),a.on("keyup change click",function(){var e=jQuery(this),t=e.val();t!=e.attr("last-val")&&(e.attr("last-val",t),n.hasClass("linked")&&(a.attr("last-val",t),a.val(t)),i.save())}),n.click(function(e){e.preventDefault(),n.toggleClass("unlinked"),n.toggleClass("linked")}),this.toggle_visibility(t)},toggle_visibility:function(e){var t=e.val(),i=jQuery(".size,.color",this.container);"none"!==t?i.show():i.hide()},fill_inputs:function(a){var n=this;_.each(["top","right","bottom","left"],function(e){if(_.isUndefined(n.params.default[e]))return!1;var t=jQuery('[data-side="'+e+'"]',n.container),i=a[e];"all"!==a.unit&&(i=kirki.util.parseNumber(i)),t.val(i)})},save:function(){var i={},a=this,n=this.container,e=jQuery(".border-hidden-value",n),t=jQuery(".border-style select",n).val(),r=jQuery('.kirki-units-choices input[type="radio"]:checked',n),o=jQuery(".color input",n).val();i.style=t,i.unit=a.has_units?r.val():"all",i.color=o,_.each(["top","right","bottom","left"],function(e){if(_.isUndefined(a.params.default[e]))return i[e]=0,!1;var t=jQuery('input[data-side="'+e+'"]',n).val();""===t&&(t=0),"all"!==i.unit&&(t+=i.unit),i[e]=t}),e.attr("value",JSON.stringify(i)).trigger("change"),a.setting.set(i)}}),wp.customize.controlConstructor["kirki-box-shadow"]=wp.customize.kirkiDynamicControl.extend({initKirkiControl:function(){var i=this,e=i.container,t=jQuery(".kirki-control-dimension input",e),a=jQuery(".color input",e),n=i.setting._value;!n&&i.params.default&&(n=i.params.default),n&&i.fill_inputs(n),a.attr("data-default-color",n.color).data("default-color",n.color).val(n.color).wpColorPicker({change:function(e,t){setTimeout(function(){i.save()},100)},clear:function(e){setTimeout(function(){i.save()},100)}}),t.on("keyup change click",function(){var e=jQuery(this),t=e.val();t!=e.attr("last-val")&&(e.attr("last-val",t),i.save())})},fill_inputs:function(a){var n=this;_.each(["h_offset","v_offset","blur","spread"],function(e){if(("blur"==e||"spread"==e)&&_.isUndefined(n.params.default[e]))return!1;var t=jQuery('[data-side="'+e+'"]',n.container),i=kirki.util.parseNumber(a[e]);t.val(i)})},save:function(){var i={},a=this,n=this.container,e=jQuery(".border-hidden-value",n),t=jQuery(".color input",n).val();_.each(["h_offset","v_offset","blur","spread"],function(e){var t=jQuery('input[data-side="'+e+'"]',n).val();"blur"!=e&&"spread"!=e||_.isUndefined(a.params.default[e])&&(t=0),i[e]=t+"px"}),i.color=t,console.log(i),e.attr("value",JSON.stringify(i)).trigger("change"),a.setting.set(i)}}),wp.customize.controlConstructor["kirki-color-palette"]=wp.customize.kirkiDynamicControl.extend({}),wp.customize.controlConstructor["kirki-color-gradient"]=wp.customize.kirkiDynamicControl.extend({ready:function(){"use strict";!_.isUndefined(window.kirkiControlLoader)&&_.isFunction(kirkiControlLoader)?kirkiControlLoader(this):this.initKirkiControl()},initKirkiControl:function(){var i=this,e=i.container,t=jQuery(".color-gradient-hidden-value",e),a=jQuery(".color1 .color-picker",e),n=jQuery(".color2 .color-picker",e),r=jQuery(".location input",e),o=i.container.find(".slider-wrapper .value input"),s=i.container.find(".slider-reset"),l="postMessage"===i.setting.transport?"mousemove change":"change",c=e.find(".direction select"),u=i.setting._value;function d(){var e={color1:a.val(),color2:n.val(),location:r.val()+"%",direction:c.val()};t.attr("value",JSON.stringify(e)).trigger("change"),i.setting.set(e)}u||(u=i.params.default),u||(u={color1:"",color2:"",location:"0%",direction:""}),a.attr("data-default-color",u.color1).data("default-color",u.color1).val(u.color1).wpColorPicker({change:function(e,t){setTimeout(function(){d()},100)}}),n.attr("data-default-color",u.color2).data("default-color",u.color2).val(u.color2).wpColorPicker({change:function(e,t){setTimeout(function(){d()},100)}}),r.val(u.location.replace("%","")),c.val(u.direction),r.on(l,function(e){o.attr("value",r.val()),d()}),o.on("input paste change",function(e){}),c.on("change",function(e){d()}),s.click(function(e){var t=i.params.default.location.replace("%","")||0;r.val(t),o.val(t)})}}),wp.customize.controlConstructor["kirki-dashicons"]=wp.customize.kirkiDynamicControl.extend({}),wp.customize.controlConstructor["kirki-date"]=wp.customize.kirkiDynamicControl.extend({initKirkiControl:function(){var e=this,t=e.selector+" input.datepicker";jQuery(t).datepicker({dateFormat:"yy-mm-dd"}),this.container.on("change keyup paste","input.datepicker",function(){e.setting.set(jQuery(this).val())})}}),wp.customize.controlConstructor["kirki-dimension"]=wp.customize.kirkiDynamicControl.extend({initKirkiControl:function(){var e,t=this;t.kirkiNotifications(),this.container.on("change keyup paste","input",function(){e=jQuery(this).val(),t.setting.set(e)})},kirkiNotifications:function(){var a=void 0!==this.params.choices&&void 0!==this.params.choices.accept_unitless&&!0===this.params.choices.accept_unitless;wp.customize(this.id,function(i){i.bind(function(e){var t="long_title";!1!==kirki.util.validate.cssValue(e)||a&&!isNaN(e)?i.notifications.remove(t):i.notifications.add(t,new wp.customize.Notification(t,{type:"warning",message:dimensionkirkiL10n["invalid-value"]}))})})}}),wp.customize.controlConstructor["kirki-dimensions"]=wp.customize.kirkiDynamicControl.extend({initKirkiControl:function(){var e,t=this.params.choices.controls,i={},a=[];for(_.each(t,function(e,t){!0===e&&a.push(t)}),e=0;e<a.length;e++)i[a[e]]=this.setting._value[a[e]],this.updateDimensionsValue(a[e],i)},updateDimensionsValue:function(e,t){var i=this;i.container.on("change keyup paste","."+e+" input",function(){t[e]=jQuery(this).val(),i.kirkiNotifications(),i.saveValue(t)})},saveValue:function(e){var i={};_.each(e,function(e,t){i[t]=e}),this.setting.set(i)},kirkiNotifications:function(){wp.customize(this.id,function(n){n.bind(function(e){var t,i="long_title",a={};if(n.notifications.remove(i),_.each(e,function(e,t){!1===kirki.util.validate.cssValue(e)?a[t]=e:delete a[t]}),!_.isEmpty(a))return t=dimensionskirkiL10n["invalid-value"]+" ("+_.values(a).toString()+") ",void n.notifications.add(i,new wp.customize.Notification(i,{type:"warning",message:t}));n.notifications.remove(i)})})}}),wp.customize.controlConstructor["kirki-editor"]=wp.customize.kirkiDynamicControl.extend({initKirkiControl:function(){var i,a=this,n=a.container.find("textarea"),e="kirki-editor-"+a.id.replace("[","").replace("]","");wp.editor.initialize(e,{tinymce:{wpautop:!0},quicktags:!0,mediaButtons:!0}),(i=tinyMCE.get(e))&&i.onChange.add(function(e){var t;e.save(),t=i.getContent(),n.val(t).trigger("change"),wp.customize.instance(a.id).set(t)})}}),wp.customize.controlConstructor["kirki-fontawesome"]=wp.customize.kirkiDynamicControl.extend({initKirkiControl:function(){var e,t,i=this,a=this.container.find("select"),n=jQuery.parseJSON(fontAwesomeJSON),r={data:[],escapeMarkup:function(e){return e},templateResult:function(e){return'<i class="fa fa-lg fa-'+e.id+'" aria-hidden="true"></i> '+e.text},templateSelection:function(e){return'<i class="fa fa-lg fa-'+e.id+'" aria-hidden="true"></i> '+e.text}};_.each(n.icons,function(e){r.data.push({id:e.id,text:e.name})}),(t=jQuery(a).selectWoo(r)).on("change",function(){e=jQuery(this).val(),i.setting.set(e)}),t.val(i.setting._value).trigger("change")}}),wp.customize.controlConstructor["kirki-multicheck"]=wp.customize.kirkiDynamicControl.extend({initKirkiControl:function(){var a=this;a.container.on("change","input",function(){var t=[],i=0;jQuery.each(a.params.choices,function(e){a.container.find('input[value="'+e+'"]').is(":checked")?(a.container.find('input[value="'+e+'"]').parent().addClass("checked"),t[i]=e,i++):a.container.find('input[value="'+e+'"]').parent().removeClass("checked")}),a.setting.set(t)})}}),wp.customize.controlConstructor["kirki-multicolor"]=wp.customize.Control.extend({ready:function(){"use strict";!_.isUndefined(window.kirkiControlLoader)&&_.isFunction(kirkiControlLoader)?kirkiControlLoader(this):this.initKirkiControl()},initKirkiControl:function(){"use strict";var r=this.params.choices,e=Object.keys(r),t=(this.params.value,0);function i(e,t,i){var a=e.container.find(".multicolor-index-"+i),n={change:function(){setTimeout(function(){e.saveValue(i,a.val()),e.container.find(".multicolor-index-"+i).trigger("change")},100)}};_.isObject(r.irisArgs)&&_.each(r.irisArgs,function(e,t){n[t]=e}),a.wpColorPicker(n)}for(;t<Object.keys(r).length;)i(this,0,e[t]),t++},saveValue:function(e,t){var i=this.container.find(".multicolor-hidden-value"),a=this.setting._value;a[e]=t,jQuery(i).attr("value",JSON.stringify(a)).trigger("change"),this.setting.set(a)}}),wp.customize.controlConstructor["kirki-palette"]=wp.customize.kirkiDynamicControl.extend({}),wp.customize.controlConstructor["kirki-radio-buttonset"]=wp.customize.kirkiDynamicControl.extend({}),wp.customize.controlConstructor["kirki-radio-image"]=wp.customize.kirkiDynamicControl.extend({});var RepeaterRow=function(e,t,i,a){"use strict";var n=this;this.rowIndex=e,this.container=t,this.label=i,this.header=this.container.find(".repeater-row-header"),this.header.on("click",function(){n.toggleMinimize()}),this.container.on("click",".repeater-row-remove",function(){n.remove()}),this.header.on("mousedown",function(){n.container.trigger("row:start-dragging")}),this.container.on("keyup change","input, select, textarea",function(e){n.container.trigger("row:update",[n.rowIndex,jQuery(e.target).data("field"),e.target])}),this.setRowIndex=function(e){this.rowIndex=e,this.container.attr("data-row",e),this.container.data("row",e),this.updateLabel()},this.toggleMinimize=function(){this.container.toggleClass("minimized"),this.header.find(".dashicons").toggleClass("dashicons-arrow-up").toggleClass("dashicons-arrow-down")},this.remove=function(){this.container.slideUp(300,function(){jQuery(this).detach()}),this.container.trigger("row:remove",[this.rowIndex])},this.updateLabel=function(){var e,t,i;if("field"===this.label.type&&(e=this.container.find('.repeater-field [data-field="'+this.label.field+'"]'),_.isFunction(e.val)&&""!==(t=e.val())))return _.isUndefined(a.params.fields[this.label.field])||_.isUndefined(a.params.fields[this.label.field].type)||("select"===a.params.fields[this.label.field].type?_.isUndefined(a.params.fields[this.label.field].choices)||_.isUndefined(a.params.fields[this.label.field].choices[e.val()])||(t=a.params.fields[this.label.field].choices[e.val()]):"radio"!==a.params.fields[this.label.field].type&&"radio-image"!==a.params.fields[this.label.field].type||(i=a.selector+' [data-row="'+this.rowIndex+'"] .repeater-field [data-field="'+this.label.field+'"]:checked',t=jQuery(i).val())),void this.header.find(".repeater-row-label").text(t);this.header.find(".repeater-row-label").text(this.label.value+" "+(this.rowIndex+1))},this.updateLabel()};wp.customize.controlConstructor.repeater=wp.customize.Control.extend({ready:function(){"use strict";!_.isUndefined(window.kirkiControlLoader)&&_.isFunction(kirkiControlLoader)?kirkiControlLoader(this):this.initKirkiControl()},initKirkiControl:function(){"use strict";var t,i,a=this,e=this.params.value;this.settingField=this.container.find("[data-customize-setting-link]").first(),this.setValue([],!1),this.repeaterFieldsContainer=this.container.find(".repeater-fields").first(),this.currentIndex=0,this.rows=[],t=!1,_.isUndefined(this.params.choices.limit)||(t=!(this.params.choices.limit<=0)&&parseInt(this.params.choices.limit,10)),this.container.on("click","button.repeater-add",function(e){e.preventDefault(),!t||a.currentIndex<t?((i=a.addRow()).toggleMinimize(),a.initColorPicker(),a.initSelect(i)):jQuery(a.selector+" .limit").addClass("highlight")}),this.container.on("click",".repeater-row-remove",function(){a.currentIndex--,(!t||a.currentIndex<t)&&jQuery(a.selector+" .limit").removeClass("highlight")}),this.container.on("click keypress",".repeater-field-image .upload-button,.repeater-field-cropped_image .upload-button,.repeater-field-upload .upload-button",function(e){e.preventDefault(),a.$thisButton=jQuery(this),a.openFrame(e)}),this.container.on("click keypress",".repeater-field-image .remove-button,.repeater-field-cropped_image .remove-button",function(e){e.preventDefault(),a.$thisButton=jQuery(this),a.removeImage(e)}),this.container.on("click keypress",".repeater-field-upload .remove-button",function(e){e.preventDefault(),a.$thisButton=jQuery(this),a.removeFile(e)}),this.repeaterTemplate=_.memoize(function(){var t={evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g,variable:"data"};return function(e){return _.template(a.container.find(".customize-control-repeater-content").first().html(),null,t)(e)}}),e.length&&_.each(e,function(e){i=a.addRow(e),a.initColorPicker(),a.initSelect(i,e)}),this.setValue(e,!0,!0),this.repeaterFieldsContainer.sortable({handle:".repeater-row-header",update:function(){a.sort()}})},openFrame:function(e){"use strict";wp.customize.utils.isKeydownButNotEnterEvent(e)||(this.$thisButton.closest(".repeater-field").hasClass("repeater-field-cropped_image")?this.initCropperFrame():this.initFrame(),this.frame.open())},initFrame:function(){"use strict";var e=this.getMimeType();this.frame=wp.media({states:[new wp.media.controller.Library({library:wp.media.query({type:e}),multiple:!1,date:!1})]}),this.frame.on("select",this.onSelect,this)},initCropperFrame:function(){"use strict";var t=this.$thisButton.siblings("input.hidden-field").attr("data-field"),e=this.getMimeType();_.isString(t)&&""!==t&&_.isObject(this.params.fields[t])&&"cropped_image"===this.params.fields[t].type&&["width","height","flex_width","flex_height"].forEach(function(e){_.isUndefined(this.params.fields[t][e])||(this.params[e]=this.params.fields[t][e])}.bind(this)),this.frame=wp.media({button:{text:"Select and Crop",close:!1},states:[new wp.media.controller.Library({library:wp.media.query({type:e}),multiple:!1,date:!1,suggestedWidth:this.params.width,suggestedHeight:this.params.height}),new wp.media.controller.CustomizeImageCropper({imgSelectOptions:this.calculateImageSelectOptions,control:this})]}),this.frame.on("select",this.onSelectForCrop,this),this.frame.on("cropped",this.onCropped,this),this.frame.on("skippedcrop",this.onSkippedCrop,this)},onSelect:function(){"use strict";var e=this.frame.state().get("selection").first().toJSON();this.$thisButton.closest(".repeater-field").hasClass("repeater-field-upload")?this.setFileInRepeaterField(e):this.setImageInRepeaterField(e)},onSelectForCrop:function(){"use strict";var e=this.frame.state().get("selection").first().toJSON();this.params.width!==e.width||this.params.height!==e.height||this.params.flex_width||this.params.flex_height?this.frame.setState("cropper"):this.setImageInRepeaterField(e)},onCropped:function(e){"use strict";this.setImageInRepeaterField(e)},calculateImageSelectOptions:function(e,t){"use strict";var i,a,n,r=t.get("control"),o=!!parseInt(r.params.flex_width,10),s=!!parseInt(r.params.flex_height,10),l=e.get("width"),c=e.get("height"),u=parseInt(r.params.width,10),d=parseInt(r.params.height,10),p=u/d,f=l,h=c;return t.set("canSkipCrop",!r.mustBeCropped(o,s,u,d,l,c)),p<f/h?u=(d=h)*p:d=(u=f)/p,!(n={handles:!0,keys:!0,instance:!0,persistent:!0,imageWidth:l,imageHeight:c,x1:i=(f-u)/2,y1:a=(h-d)/2,x2:u+i,y2:d+a})===s&&!1===o&&(n.aspectRatio=u+":"+d),!1===s&&(n.maxHeight=d),!1===o&&(n.maxWidth=u),n},mustBeCropped:function(e,t,i,a,n,r){"use strict";return!(!0===e&&!0===t||!0===e&&a===r||!0===t&&i===n||i===n&&a===r||n<=i)},onSkippedCrop:function(){"use strict";var e=this.frame.state().get("selection").first().toJSON();this.setImageInRepeaterField(e)},setImageInRepeaterField:function(e){"use strict";var t=this.$thisButton.closest(".repeater-field-image,.repeater-field-cropped_image");t.find(".kirki-image-attachment").html('<img src="'+e.url+'">').hide().slideDown("slow"),t.find(".hidden-field").val(e.id),this.$thisButton.text(this.$thisButton.data("alt-label")),t.find(".remove-button").show(),t.find("input, textarea, select").trigger("change"),this.frame.close()},setFileInRepeaterField:function(e){"use strict";var t=this.$thisButton.closest(".repeater-field-upload");t.find(".kirki-file-attachment").html('<span class="file"><span class="dashicons dashicons-media-default"></span> '+e.filename+"</span>").hide().slideDown("slow"),t.find(".hidden-field").val(e.id),this.$thisButton.text(this.$thisButton.data("alt-label")),t.find(".upload-button").show(),t.find(".remove-button").show(),t.find("input, textarea, select").trigger("change"),this.frame.close()},getMimeType:function(){"use strict";var e=this.$thisButton.siblings("input.hidden-field").attr("data-field");return _.isString(e)&&""!==e&&_.isObject(this.params.fields[e])&&"upload"===this.params.fields[e].type&&!_.isUndefined(this.params.fields[e].mime_type)?this.params.fields[e].mime_type:"image"},removeImage:function(e){"use strict";var t,i;wp.customize.utils.isKeydownButNotEnterEvent(e)||(i=(t=this.$thisButton.closest(".repeater-field-image,.repeater-field-cropped_image,.repeater-field-upload")).find(".upload-button"),t.find(".kirki-image-attachment").slideUp("fast",function(){jQuery(this).show().html(jQuery(this).data("placeholder"))}),t.find(".hidden-field").val(""),i.text(i.data("label")),this.$thisButton.hide(),t.find("input, textarea, select").trigger("change"))},removeFile:function(e){"use strict";var t,i;wp.customize.utils.isKeydownButNotEnterEvent(e)||(i=(t=this.$thisButton.closest(".repeater-field-upload")).find(".upload-button"),t.find(".kirki-file-attachment").slideUp("fast",function(){jQuery(this).show().html(jQuery(this).data("placeholder"))}),t.find(".hidden-field").val(""),i.text(i.data("label")),this.$thisButton.hide(),t.find("input, textarea, select").trigger("change"))},getValue:function(){"use strict";return JSON.parse(decodeURI(this.setting.get()))},setValue:function(e,t,i){"use strict";var n=e,r=[];i&&(jQuery.each(this.params.fields,function(e,t){"image"!==t.type&&"cropped_image"!==t.type&&"upload"!==t.type||r.push(e)}),jQuery.each(e,function(i,a){jQuery.each(r,function(e,t){_.isUndefined(a[t])||_.isUndefined(a[t].id)||(n[i][t]=a[t].id)})})),this.setting.set(encodeURI(JSON.stringify(n))),t&&this.settingField.trigger("change")},addRow:function(e){"use strict";var t,n,i,r=this,a=r.repeaterTemplate(),o=this.getValue(),s={};if(a){if(t=jQuery.extend(!0,{},r.params.fields),e)for(i in e)e.hasOwnProperty(i)&&t.hasOwnProperty(i)&&(t[i].default=e[i]);for(i in t.index=this.currentIndex,a=a(t),(n=new RepeaterRow(r.currentIndex,jQuery(a).appendTo(r.repeaterFieldsContainer),r.params.row_label,r)).container.on("row:remove",function(e,t){r.deleteRow(t)}),n.container.on("row:update",function(e,t,i,a){r.updateField.call(r,e,t,i,a),n.updateLabel()}),this.rows[this.currentIndex]=n,t)t.hasOwnProperty(i)&&(s[i]=t[i].default);return o[this.currentIndex]=s,this.setValue(o,!0),this.currentIndex++,n}},sort:function(){"use strict";var i=this,e=this.repeaterFieldsContainer.find(".repeater-row"),a=[],n=i.getValue(),r=[],o=[];e.each(function(e,t){a.push(jQuery(t).data("row"))}),jQuery.each(a,function(e,t){r[e]=i.rows[t],r[e].setRowIndex(e),o[e]=n[t]}),i.rows=r,i.setValue(o)},deleteRow:function(e){"use strict";var t,i=this.getValue();for(t in i[e]&&this.rows[e]&&(delete i[e],delete this.rows[e],this.setValue(i,!0)),1,this.rows)this.rows.hasOwnProperty(t)&&this.rows[t]&&(this.rows[t].updateLabel(),0)},updateField:function(e,t,i,a){"use strict";var n,r,o;this.rows[t]&&this.params.fields[i]&&(n=this.params.fields[i].type,r=this.rows[t],o=this.getValue(),a=jQuery(a),_.isUndefined(o[r.rowIndex][i])||(o[r.rowIndex][i]="checkbox"===n?a.is(":checked"):a.val(),this.setValue(o,!0)))},initColorPicker:function(){"use strict";var r=this,e=r.container.find(".color-picker-hex"),t={},i=e.data("field");_.isUndefined(i)||_.isUndefined(r.params.fields[i])||_.isUndefined(r.params.fields[i].palettes)||!_.isObject(r.params.fields[i].palettes)||(t.palettes=r.params.fields[i].palettes),t.change=function(e,t){var i=jQuery(e.target),a=i.closest(".repeater-row").data("row"),n=r.getValue();n[a][i.data("field")]=t.color.toString(),r.setValue(n,!0)},0!==e.length&&e.wpColorPicker(t)},initSelect:function(e,t){"use strict";var i,a,n=this,r=e.container.find(".repeater-field select"),o={};0!==r.length&&(i=r.data("field"),"undefed"!==(a=jQuery(r).data("multiple"))&&jQuery.isNumeric(a)&&1<(a=parseInt(a,10))&&(o.maximumSelectionLength=a),(t=t||{})[i]=t[i]||"",jQuery(r).selectWoo(o).val(t[i]||jQuery(r).val()),this.container.on("change",".repeater-field select",function(e){var t=jQuery(e.target),i=t.closest(".repeater-row").data("row"),a=n.getValue();a[i][t.data("field")]=jQuery(this).val(),n.setValue(a)}))}}),wp.customize.controlConstructor["kirki-slider"]=wp.customize.kirkiDynamicControl.extend({initKirkiControl:function(){var e=this,t="postMessage"===e.setting.transport?"mousemove change":"change",i=e.container.find('input[type="range"]'),a=e.container.find('input[type="text"]'),n=e.setting._value;a.attr("value",n),i.on("mousemove change",function(){a.attr("value",i.val())}),i.on(t,function(){e.setting.set(i.val())}),a.on("input paste change",function(){i.attr("value",a.val()),e.setting.set(a.val())}),e.container.find(".slider-reset").on("click",function(){a.attr("value",e.params.default),i.attr("value",e.params.default),e.setting.set(a.val())})}}),wp.customize.controlConstructor["kirki-slider-advanced"]=wp.customize.kirkiDynamicControl.extend({initKirkiControl:function(){var n=this,e="postMessage"===n.setting.transport?"mousemove change":"change",r=n.container.find('input[type="range"]'),o=n.container.find('input[type="text"]'),t=n.container.find('.kirki-units-choices input[type="radio"]'),i=n.container.find(".slider-reset"),a=0<t.length,s=n.params.use_media_queries;if(n.selected_device=kirki.util.media_query_devices.global,n.selected_unit="",n.rangeInput=r,n.textInput=o,n.has_units=a,n.initial_input=!1,n.initial_media_query=!1,n.units=[],n.use_media_queries=s,t.each(function(){var e=$(this);n.units.push(e.val())}),n.initValue(),n.initMediaQueries(),a){n.initUnitSelect(t);var l=null;if(l=s?n.value.desktop.unit:n.value.global.unit,t.filter('[value="'+l+'"]').prop("checked",!0),0==t.filter(":checked").length)t.first().prop("checked",!0);n.selected_unit=t.filter(":checked").val()}n.setRange(),r.on(e+" change_visual",function(e){"change_visual"!==e.type&&(n.initial_input=!0);var t=r.val();o.val(t),n.setValue(t),n.save()}),o.on("paste change change_visual",function(e){"change_visual"!==e.type&&(n.initial_input=!0);var t=o.val(),i=r.attr("min"),a=r.attr("max");a<t?t=a:t<i&&(t=i),r.attr("value",t),n.setValue(t),n.save()}),i.click(function(){n.value[n.getSelectedDeviceName()].loaded=!1,n.initValue(),n.rangeInput.trigger("change_visual")}),n.rangeInput.trigger(e)},initValue:function(){var i=this,a=i.setting._value;if(i.value={use_media_queries:a.use_media_queries||!1,global:i.defaultValue(),desktop:i.defaultValue(),tablet:i.defaultValue(),mobile:i.defaultValue()},a.use_media_queries)kirki.util.media_query_device_names.forEach(function(e){if(!i.value[e].loaded&&a[e]){var t=i.parseValue(a[e]);i.value[e].value=t.value,i.value[e].unit=t.unit,i.value[e].loaded=!0}}),a.desktop&&(i.value.global=i.value.desktop);else if(!i.value.global.loaded&&a.global){var e=i.parseValue(a.global);i.value.global.value=e.value,i.value.global.unit=e.unit,i.value.global.loaded=!0}var t=i.value.use_media_queries?"desktop":"global",n=i.value[t].value;if(i.setRange(),!i.value[t].loaded&&i.params.default)if(_.isUndefined(i.params.default))n=i.rangeInput.attr("max");else{n=parseFloat(i.params.default);var r=i.rangeInput.attr("min"),o=i.rangeInput.attr("max");o<n?n=o:n<r&&(n=r)}n||(n=i.rangeInput.attr("max")),i.has_units&&n&&(n=n.toString().replace(i.textFindRegex,"")),i.rangeInput.val(n),i.textInput.val(n)},initMediaQueries:function(){var o=this,s=o.container.find('.kirki-units-choices input[type="radio"]');o.params.use_media_queries&&kirki.util.helpers.media_query(o,o.value.use_media_queries,{device_change:function(e,t){o.selected_device=t;var i=null,a=null;if((o.value.use_media_queries=e)&&!o.initial_media_query){var n=o.params.choices,r=n.units?n.units[o.selected_unit]:o.params.choices;kirki.util.media_query_device_names.forEach(function(e){o.value[e].value||(o.value[e].value=o.params.default||r.min,o.value[e].unit=o.selected_unit)})}e&&(o.value.desktop=o.value.global),e?t==kirki.util.media_query_devices.desktop?(i=o.value.desktop.value,a=o.value.desktop.unit):t==kirki.util.media_query_devices.tablet?(i=o.value.tablet.value,a=o.value.tablet.unit):t==kirki.util.media_query_devices.mobile&&(i=o.value.mobile.value,a=o.value.mobile.unit):(o.value.global=o.value.desktop,i=o.value.global.value,a=o.value.global.unit),o.has_units&&a&&0<a.length&&(s.filter(":checked").prop("checked",!1),s.filter('[value="'+a+'"]').prop("checked",!0),0==s.filter(":checked").length&&s.first().click(),o.selected_unit=s.filter(":checked").val()),o.setRange(),o.setValue(i),o.save(),o.initial_media_query=!0}})},initUnitSelect:function(e){var a=this;e.on("change",function(){var e=$(this);a.selected_unit=e.val(),a.setRange();var t=a.params.default;if(!a.value[a.getSelectedDeviceName()].loaded&&!a.initial_input&&a.params.default){var i="";i="object"==typeof t&&t[a.selected_unit]?t[a.selected_unit].replace(a.textFindRegex,""):(i=a.parseValue(t)).value?i.value:a.rangeInput.attr("max"),a.rangeInput.val(i),a.textInput.val(i)}a.rangeInput.trigger("change_visual")})},setValue:function(e){var t=this,i=t.getSelectedDeviceName();t.rangeInput.val(e),t.textInput.val(e),t.value[i].value=e,t.value[i].unit=t.selected_unit},getSelectedDeviceName:function(){var e="global";return this.selected_device==kirki.util.media_query_devices.desktop?e="desktop":this.selected_device==kirki.util.media_query_devices.tablet?e="tablet":this.selected_device==kirki.util.media_query_devices.mobile&&(e="mobile"),e},setRange:function(){var e=this,t=e.params.choices,i=t.units?e.selected_unit||Object.keys(t.units)[0]:"",a=e.rangeInput,n=e.textInput,r=e.container.find(".suffix"),o=t.units?t.units[i]:e.params.choices,s=o.min,l=o.max,c=o.step,u=t.units?i:o.suffix||"",d=a.val();a.attr("min",s).attr("max",l).attr("step",c),r.html(u);var p=l<d||d<s;l<d?d=l:d<s&&(d=s),p&&(a.val(d),n.val(d))},save:function(){var e=this.container.find(".spacing-hidden-value"),t=jQuery.extend({},this.value);delete t.loaded,t.use_media_queries?(t.desktop=t.desktop.value+t.desktop.unit,t.tablet=t.tablet.value+t.tablet.unit,t.mobile=t.mobile.value+t.mobile.unit,delete t.desktop.loaded,delete t.tablet.loaded,delete t.mobile.loaded):(delete t.desktop,delete t.tablet,delete t.mobile,delete t.global.loaded,t.global=t.global.value+t.global.unit),delete t.value,e.attr("value",JSON.stringify(t)).trigger("change"),this.setting.set(t)},parseValue:function(e){var t=/(\d+)(\w+|.)/gm.exec(e);return!t||t.length<2?Number.isNaN(e)?{value:0,unit:""}:{value:e,unit:""}:{value:t[1]||"",unit:t[2]||""}},defaultValue:function(){return{value:"",unit:"",loaded:!1}}}),wp.customize.controlConstructor["kirki-sortable"]=wp.customize.Control.extend({ready:function(){"use strict";var e=this,t=0,i=e.container.find("ul.sortable");"text"===e.params.mode?this.initTextItems(i):this.initCheckboxItems(i),i=jQuery(i).sortable({update:function(){e.save_values()}}).disableSelection().find("li").each(function(){jQuery(this).find("i.visibility").click(function(){jQuery(this).toggleClass("dashicons-visibility-faint").parents("li:eq(0)").toggleClass("invisible")})}).click(function(){e.save_values()}),"text"===e.params.mode&&e.container.find(".kirki-sortable-item input").on("change keyup paste",function(){clearTimeout(t),t=setTimeout(function(){e.save_values()},1e3)})},save_values:function(){var e="text"===this.params.mode?this.getNewValText():this.getNewValCheckbox();this.setting.set(e)},generateListElement:function(e,t,i){var a=jQuery("<li "+this.params.inputAttrs+">").addClass("kirki-sortable-item").attr("data-value",t);return!1===i&&a.addClass("invisible"),jQuery('<i class="dashicons dashicons-menu"></i>').appendTo(a),jQuery('<i class="dashicons dashicons-visibility visibility"></i>').appendTo(a),jQuery("<span>"+e+"</span>").appendTo(a),"text"===this.params.mode&&jQuery('<input type="text">').val(t).appendTo(a),a},initCheckboxItems:function(i){var a=this,n=a.params.choices,r=a.setting._value;_.each(r,function(e){a.generateListElement(n[e],e,!0).appendTo(i)}),_.each(n,function(e,t){-1===r.indexOf(t)&&a.generateListElement(n[t],t,!1).appendTo(i)})},initTextItems:function(n){var r=this,o=r.params.choices,s=r.setting._value;_.each(s,function(e,t){var i=!0;s[t]&&0===s[t].length&&(i=!1);var a=r.generateListElement(o[t],s[t],i);a.attr("data-id",t),a.appendTo(n)});var a=Object.keys(s);_.each(o,function(e,t){if(-1===a.indexOf(t)){var i=r.generateListElement(o[t],"",!1);i.attr("data-id",t),i.appendTo(n)}})},getNewValCheckbox:function(){var e=jQuery(this.container.find("li")),t=[];return _.each(e,function(e){jQuery(e).hasClass("invisible")||t.push(jQuery(e).data("value"))}),t},getNewValText:function(){var e=jQuery(this.container.find("li")),a=[];return _.each(e,function(e){if(!jQuery(e).hasClass("invisible")){var t=jQuery(e).attr("data-id"),i=jQuery(e).find("input").val();a.push(JSON.stringify({id:t,val:i}))}}),a}}),wp.customize.controlConstructor["kirki-spacing-advanced"]=wp.customize.kirkiDynamicControl.extend({initKirkiControl:function(){"use strict";var a=this,n=a.container,e="postMessage"===a.setting.transport?"keyup change mouseup":"change",i=a.container.find(".kirki-control-dimension input"),t=i.filter('[data-side="top"]'),r=i.filter('[data-side="right"]'),o=i.filter('[data-side="bottom"]'),s=i.filter('[data-side="left"]'),l=a.container.find('.kirki-units-choices input[type="radio"]'),c=a.container.find(".kirki-input-link"),u=!_.isUndefined(a.params.choices.units);a.selected_device=kirki.util.media_query_devices.global,a.selected_unit=u?l.first().val():"all",a.all_inputs=a.container.find(".kirki-control-dimension input"),a.inputs={top:t,right:r,bottom:o,left:s},a.has_units=u,a.initial_input=!1,u||i.attr("type","text"),a.initValue(),a.initMediaQueries(),u&&kirki.util.helpers.unit_select(a,{selected_unit:a.selected_device,unit_changed:function(e){a.selected_unit=e,i.trigger("change_visual")}}),a.setInitValue(),c.click(function(e){e.preventDefault(),e.stopImmediatePropagation(),c.toggleClass("unlinked linked")}),i.on(e+" change_visual",function(e){"keyup"===e.type&&(a.initial_input=!0);var t=$(this);c.hasClass("linked")&&i.filter(":not("+t.attr("id")+"):not(.not-used)").val(t.val()),_.each(["top","right","bottom","left"],function(e){var t=jQuery('input[data-side="'+e+'"]',n).val(),i=a.getSelectedDeviceName();if(_.isUndefined(a.params.default[e]))return a.value[i][e]=0,!1;""==t&&(t=0),"all"!==a.selected_unit&&(t+=a.selected_unit),a.value[i][e]=t}),a.value[a.getSelectedDeviceName()].unit=a.selected_unit,a.save()}),a.inputs.top.trigger("change_visual")},initValue:function(){var t=this,i=t.setting._value;t.value={use_media_queries:i.use_media_queries||!1,global:t.defaultValue(),desktop:t.defaultValue(),tablet:t.defaultValue(),mobile:t.defaultValue()},i.use_media_queries?(kirki.util.media_query_device_names.forEach(function(e){i[e]&&(t.value[e]=i[e],t.value[e].loaded=!0)}),i.desktop&&(t.value.global=i.desktop)):i.global&&(t.value.global=i.global,t.value.global.loaded=!0)},setInitValue:function(){var e=this,t=e.params.default;choices=e.params.choices;var i=e.value.use_media_queries?"desktop":"global",a=e.value[i].top,n=e.value[i].right,r=e.value[i].bottom,o=e.value[i].left;e.value[i].loaded||_.isUndefined(e.params.default)||(a=t.top||a,n=t.right||n,r=t.bottom||r,o=t.left||o),"all"!=e.selected_unit&&(_.isUndefined(t.top)||(a=kirki.util.parseNumber(a)),_.isUndefined(t.right)||(n=kirki.util.parseNumber(n)),_.isUndefined(t.bottom)||(r=kirki.util.parseNumber(r)),_.isUndefined(t.left)||(o=kirki.util.parseNumber(o))),e.inputs.top.val(a),e.inputs.right.val(n),e.inputs.bottom.val(r),e.inputs.left.val(o)},initMediaQueries:function(){var l=this,c=l.params.default,u=l.container.find('.kirki-units-choices input[type="radio"]');l.params.choices.use_media_queries&&kirki.util.helpers.media_query(l,l.value.use_media_queries,{device_change:function(e,t){l.selected_device=t,l.value.use_media_queries=e;var i=l.getSelectedDeviceName(),a=0,n=0,r=0,o=0;if(e&&(l.value.desktop=l.value.global),e||(l.value.global=l.value.desktop,i="global"),a=l.value[i].top,n=l.value[i].right,r=l.value[i].bottom,o=l.value[i].left,!_.isUndefined(l.params.choices.units)){var s=l.value[i].unit;s&&0<s.length&&(u.filter(":checked").prop("checked",!1),u.filter('[value="'+s+'"]').prop("checked",!0),0==u.filter(":checked").length&&u.first().click(),l.selected_unit=u.filter(":checked").val()),_.isUndefined(c.top)||(a=kirki.util.parseNumber(a)),_.isUndefined(c.right)||(n=kirki.util.parseNumber(n)),_.isUndefined(c.bottom)||(r=kirki.util.parseNumber(r)),_.isUndefined(c.left)||(o=kirki.util.parseNumber(o))}l.inputs.top.val(a),l.inputs.right.val(n),l.inputs.bottom.val(r),l.inputs.left.val(o),l.save()}})},getSelectedDeviceName:function(){var e="global";return this.selected_device==kirki.util.media_query_devices.desktop?e="desktop":this.selected_device==kirki.util.media_query_devices.tablet?e="tablet":this.selected_device==kirki.util.media_query_devices.mobile&&(e="mobile"),e},save:function(){var e=this.container.find(".spacing-hidden-value"),t=jQuery.extend({},this.value);delete t.loaded,t.use_media_queries?(delete t.global,delete t.desktop.loaded,delete t.tablet.loaded,delete t.mobile.loaded):(delete t.desktop,delete t.tablet,delete t.mobile,delete t.global.loaded),console.log(t),e.attr("value",JSON.stringify(t)).trigger("change"),this.setting.set(t)},defaultValue:function(){return{top:"",right:"",bottom:"",left:"",unit:"",loaded:!1}}}),wp.customize.controlConstructor["kirki-switch"]=wp.customize.kirkiDynamicControl.extend({initKirkiControl:function(){"use strict";var e=this,t=e.setting._value;this.container.on("change","input",function(){t=!!jQuery(this).is(":checked"),e.setting.set(t)})}}),wp.customize.controlConstructor["toggle-tabs"]=wp.customize.kirkiDynamicControl.extend({initKirkiControl:function(){var e=this,t=e.container.find(".kirki-toggle-tabs-outer"),s=e.id,l=e.params.choices;for(var i in(e.tab_container=t).find(".tabs li:first").addClass("active"),t.find(".tab-content:first").addClass("active"),l){var a=i.replace(" ","_"),n=$('li[href="#'+s+"_"+a+'"]'),r=$("#"+s+"_"+a);e.registerTabEvents(n,r)}setInterval(function(){for(var e in l){var t=e.replace(" ","_"),i=l[e],a=$("#"+s+"_"+t);for(var n in i){var r=i[n],o=$("#customize-control-"+r);o.parent().hasClass("tab-content")||o.detach().appendTo(a)}}},500)},registerTabEvents:function(t,i){var a=this.tab_container;t.click(function(e){e.preventDefault(),a.find(".active").removeClass("active"),t.addClass("active"),i.addClass("active")})}}),wp.customize.controlConstructor["kirki-toggle"]=wp.customize.kirkiDynamicControl.extend({initKirkiControl:function(){var e=this,t=e.setting._value;this.container.on("change","input",function(){t=!!jQuery(this).is(":checked"),e.setting.set(t)})}}),wp.customize.controlConstructor["kirki-typography"]=wp.customize.kirkiDynamicControl.extend({initKirkiControl:function(){"use strict";var e,t=this,i=t.setting._value;t.renderFontSelector(),t.renderBackupFontSelector(),t.renderVariantSelector(),t.localFontsCheckbox(),void 0!==t.params.default["font-size"]&&this.container.on("change keyup paste",".font-size input",function(){t.saveValue("font-size",jQuery(this).val())}),void 0!==t.params.default["line-height"]&&this.container.on("change keyup paste",".line-height input",function(){t.saveValue("line-height",jQuery(this).val())}),void 0!==t.params.default["margin-top"]&&this.container.on("change keyup paste",".margin-top input",function(){t.saveValue("margin-top",jQuery(this).val())}),void 0!==t.params.default["margin-bottom"]&&this.container.on("change keyup paste",".margin-bottom input",function(){t.saveValue("margin-bottom",jQuery(this).val())}),void 0!==t.params.default["letter-spacing"]&&(i["letter-spacing"]=jQuery.isNumeric(i["letter-spacing"])?i["letter-spacing"]+"px":i["letter-spacing"],this.container.on("change keyup paste",".letter-spacing input",function(){i["letter-spacing"]=jQuery.isNumeric(jQuery(this).val())?jQuery(this).val()+"px":jQuery(this).val(),t.saveValue("letter-spacing",i["letter-spacing"])})),void 0!==t.params.default["word-spacing"]&&this.container.on("change keyup paste",".word-spacing input",function(){t.saveValue("word-spacing",jQuery(this).val())}),void 0!==t.params.default["text-align"]&&this.container.on("change",".text-align input",function(){t.saveValue("text-align",jQuery(this).val())}),void 0!==t.params.default["text-transform"]&&jQuery(t.selector+" .text-transform select").selectWoo().on("change",function(){t.saveValue("text-transform",jQuery(this).val())}),void 0!==t.params.default["text-decoration"]&&jQuery(t.selector+" .text-decoration select").selectWoo().on("change",function(){t.saveValue("text-decoration",jQuery(this).val())}),void 0!==t.params.default.color&&(e=this.container.find(".kirki-color-control")).wpColorPicker({change:function(){setTimeout(function(){t.saveValue("color",e.val())},100)},clear:function(e){setTimeout(function(){t.saveValue("color","")},100)}})},renderFontSelector:function(){var e,t,i=this,a=i.selector+" .font-family select",n=[],r=[],o=[],s=i.setting._value,l=i.getFonts();_.isUndefined(l.standard)||_.each(l.standard,function(e){r.push({id:e.family.replace(/&quot;/g,"&#39"),text:e.label})}),_.isUndefined(l.google)||_.each(l.google,function(e){o.push({id:e.family,text:e.family})}),t={},_.isUndefined(i.params)||_.isUndefined(i.params.choices)||_.isUndefined(i.params.choices.fonts)||_.isUndefined(i.params.choices.fonts.families)||(t=i.params.choices.fonts.families),n=jQuery.extend({},t,{default:{text:kirkiL10n.defaultCSSValues,children:[{id:"",text:kirkiL10n.defaultBrowserFamily},{id:"initial",text:"initial"},{id:"inherit",text:"inherit"}]},standard:{text:kirkiL10n.standardFonts,children:r},google:{text:kirkiL10n.googleFonts,children:o}}),kirkiL10n.isScriptDebug&&(console.info('Kirki Debug: Font families for control "'+i.id+'":'),console.info(n)),n=_.values(n),e=jQuery(a).selectWoo({data:n}),(s["font-family"]||""===s["font-family"])&&(s["font-family"]=kirki.util.parseHtmlEntities(s["font-family"].replace(/'/g,'"')),e.val(s["font-family"]).trigger("change")),e.on("change",function(){i.saveValue("font-family",jQuery(this).val()),i.renderBackupFontSelector(),i.renderVariantSelector()})},renderBackupFontSelector:function(){var e,t=this,i=t.selector+" .font-backup select",a=[],n=t.setting._value,r=n["font-family"],o=t.getFonts();(_.isUndefined(n["font-backup"])||null===n["font-backup"])&&(n["font-backup"]=""),"inherit"!==r&&"initial"!==r&&"google"===kirki.util.webfonts.getFontType(r)?(jQuery(t.selector+" .font-backup").show(),_.isUndefined(o.standard)||_.each(o.standard,function(e){a.push({id:e.family.replace(/&quot;/g,"&#39"),text:e.label})}),e=jQuery(i).selectWoo({data:a}),void 0!==n["font-backup"]&&e.val(n["font-backup"].replace(/'/g,'"')).trigger("change"),e.on("change",function(){t.saveValue("font-backup",jQuery(this).val())})):jQuery(t.selector+" .font-backup").hide()},renderVariantSelector:function(){var e,t,i,a=this,n=a.setting._value,r=n["font-family"],o=a.selector+" .variant select",s=[],l=!1,c=kirki.util.webfonts.getFontType(r),u=["","regular","italic","700","700italic"];if("google"===c&&(u=kirki.util.webfonts.google.getVariants(r)),_.isUndefined(a.params)||_.isUndefined(a.params.choices)||_.isUndefined(a.params.choices.fonts)||_.isUndefined(a.params.choices.fonts.variants)||_.isUndefined(a.params.choices.fonts.variants[r])||(u=a.params.choices.fonts.variants[r]),kirkiL10n.isScriptDebug&&(console.info('Kirki Debug: Font variants for font-family "'+r+'":'),console.info(u)),"inherit"!==r&&"initial"!==r&&""!==r||(n.variant="inherit",u=[""],jQuery(a.selector+" .variant").hide()),u.length<=1)return jQuery(a.selector+" .variant").hide(),n.variant=u[0],a.saveValue("variant",n.variant),""!==n.variant&&n.variant?(e=_.isString(n.variant)?n.variant.match(/\d/g):"400",e=_.isObject(e)?e.join(""):"400",i=n.variant&&-1!==n.variant.indexOf("italic")?"italic":"normal"):i=e="",a.saveValue("font-weight",e),void a.saveValue("font-style",i);jQuery(a.selector+" .font-backup").show(),jQuery(a.selector+" .variant").show(),_.each(u,function(e){n.variant===e&&(l=!0),s.push({id:e,text:e})}),l||(n.variant="regular"),jQuery(o).hasClass("select2-hidden-accessible")&&(jQuery(o).selectWoo("destroy"),jQuery(o).empty()),(t=jQuery(o).selectWoo({data:s})).val(n.variant).trigger("change"),t.on("change",function(){a.saveValue("variant",jQuery(this).val()),"string"!=typeof n.variant&&(n.variant=u[0]),e=_.isString(n.variant)?n.variant.match(/\d/g):"400",e=_.isObject(e)?e.join(""):"400",i=-1!==n.variant.indexOf("italic")?"italic":"normal",a.saveValue("font-weight",e),a.saveValue("font-style",i)})},getFonts:function(){var e=this,t=kirki.util.webfonts.google.getFonts(),i={},a="alpha",n=0,r={};return _.isEmpty(e.params.choices.fonts.google)?i=kirki.util.webfonts.google.getFonts(a,"",n):"alpha"===e.params.choices.fonts.google[0]||"popularity"===e.params.choices.fonts.google[0]||"trending"===e.params.choices.fonts.google[0]?(a=e.params.choices.fonts.google[0],isNaN(e.params.choices.fonts.google[1])||(n=parseInt(e.params.choices.fonts.google[1],10)),i=kirki.util.webfonts.google.getFonts(a,"",n)):_.each(e.params.choices.fonts.google,function(e){void 0===t[e]||_.isEmpty(t[e])||(i[e]=t[e])}),_.isEmpty(e.params.choices.fonts.standard)?_.each(kirki.util.webfonts.standard.fonts,function(e,t){r[t]={family:e.stack,label:e.label}}):_.each(e.params.choices.fonts.standard,function(e){void 0===kirki.util.webfonts.standard.fonts[e]||_.isEmpty(kirki.util.webfonts.standard.fonts[e])?r[e]={family:e,label:e}:(r[e]={},"undefined"===kirki.util.webfonts.standard.fonts[e].stack||_.isEmpty(kirki.util.webfonts.standard.fonts[e].stack)?r[e].family=i[e]:r[e].family=kirki.util.webfonts.standard.fonts[e].stack,"undefined"===kirki.util.webfonts.standard.fonts[e].label||_.isEmpty(kirki.util.webfonts.standard.fonts[e].label)?_.isEmpty(r[e])||(r[e].label=r[e]):r[e].label=kirki.util.webfonts.standard.fonts[e].label)}),{google:i,standard:r}},localFontsCheckbox:function(){var e=this,t=(e.container.find(".kirki-host-font-locally"),e.container.find(".kirki-host-font-locally input")),i=jQuery(t).is(":checked");e.setting._value&&e.setting._value.downloadFont&&jQuery(t).attr("checked","checked"),jQuery(t).on("change",function(){i=jQuery(t).is(":checked"),e.saveValue("downloadFont",i)})},saveValue:function(e,t){var i=this.container.find(".typography-hidden-value"),a=this.setting._value;a[e]=t,jQuery(i).attr("value",JSON.stringify(a)).trigger("change"),this.setting.set(a)}}),wp.customize.controlConstructor["kirki-typography-advanced"]=wp.customize.kirkiDynamicControl.extend({initKirkiControl:function(){"use strict";var e,t=this,i=t.setting._value;t.global_types=["font-family","font-backup","font-weight","font-style","variant","text-transform","text-decoration","color","text-align"],t.media_query_types=["font-size","line-height","margin-top","margin-bottom","letter-spacing","word-spacing"],t.selected_device=kirki.util.media_query_devices.global,t.initValue(),t.initMediaQueries(),t.renderFontSelector(),t.renderBackupFontSelector(),t.renderVariantSelector(),t.localFontsCheckbox(),void 0!==t.params.default["font-size"]&&this.container.on("change keyup paste",".font-size input",function(){t.saveValue("font-size",jQuery(this).val())}),void 0!==t.params.default["line-height"]&&this.container.on("change keyup paste",".line-height input",function(){t.saveValue("line-height",jQuery(this).val())}),void 0!==t.params.default["margin-top"]&&this.container.on("change keyup paste",".margin-top input",function(){t.saveValue("margin-top",jQuery(this).val())}),void 0!==t.params.default["margin-bottom"]&&this.container.on("change keyup paste",".margin-bottom input",function(){t.saveValue("margin-bottom",jQuery(this).val())}),void 0!==t.params.default["letter-spacing"]&&(i["letter-spacing"]=jQuery.isNumeric(i["letter-spacing"])?i["letter-spacing"]+"px":i["letter-spacing"],this.container.on("change keyup paste",".letter-spacing input",function(){i["letter-spacing"]=jQuery.isNumeric(jQuery(this).val())?jQuery(this).val()+"px":jQuery(this).val(),t.saveValue("letter-spacing",i["letter-spacing"])})),void 0!==t.params.default["word-spacing"]&&this.container.on("change keyup paste",".word-spacing input",function(){t.saveValue("word-spacing",jQuery(this).val())}),void 0!==t.params.default["text-align"]&&this.container.on("change",".text-align input",function(){t.saveValue("text-align",jQuery(this).val())}),void 0!==t.params.default["text-transform"]&&jQuery(t.selector+" .text-transform select").selectWoo().on("change",function(){t.saveValue("text-transform",jQuery(this).val())}),void 0!==t.params.default["text-decoration"]&&jQuery(t.selector+" .text-decoration select").selectWoo().on("change",function(){t.saveValue("text-decoration",jQuery(this).val())}),void 0!==t.params.default.color&&(e=this.container.find(".kirki-color-control")).wpColorPicker({change:function(){setTimeout(function(){t.saveValue("color",e.val())},100)},clear:function(e){setTimeout(function(){t.saveValue("color","")},100)}})},renderFontSelector:function(){var e,t,i=this,a=i.selector+" .font-family select",n=[],r=[],o=[],s=i.setting._value,l=i.getFonts();_.isUndefined(l.standard)||_.each(l.standard,function(e){r.push({id:e.family.replace(/&quot;/g,"&#39"),text:e.label})}),_.isUndefined(l.google)||_.each(l.google,function(e){o.push({id:e.family,text:e.family})}),t={},_.isUndefined(i.params)||_.isUndefined(i.params.choices)||_.isUndefined(i.params.choices.fonts)||_.isUndefined(i.params.choices.fonts.families)||(t=i.params.choices.fonts.families),n=jQuery.extend({},t,{default:{text:kirkiL10n.defaultCSSValues,children:[{id:"",text:kirkiL10n.defaultBrowserFamily},{id:"initial",text:"initial"},{id:"inherit",text:"inherit"}]},standard:{text:kirkiL10n.standardFonts,children:r},google:{text:kirkiL10n.googleFonts,children:o}}),kirkiL10n.isScriptDebug&&(console.info('Kirki Debug: Font families for control "'+i.id+'":'),console.info(n)),n=_.values(n),e=jQuery(a).selectWoo({data:n}),(s["font-family"]||""===s["font-family"])&&(s["font-family"]=kirki.util.parseHtmlEntities(s["font-family"].replace(/'/g,'"')),e.val(s["font-family"]).trigger("change")),e.on("change",function(){i.saveValue("font-family",jQuery(this).val()),i.renderBackupFontSelector(),i.renderVariantSelector()})},renderBackupFontSelector:function(){var e,t=this,i=t.selector+" .font-backup select",a=[],n=t.setting._value,r=n["font-family"],o=t.getFonts();(_.isUndefined(n["font-backup"])||null===n["font-backup"])&&(n["font-backup"]=""),"inherit"!==r&&"initial"!==r&&"google"===kirki.util.webfonts.getFontType(r)?(jQuery(t.selector+" .font-backup").show(),_.isUndefined(o.standard)||_.each(o.standard,function(e){a.push({id:e.family.replace(/&quot;/g,"&#39"),text:e.label})}),e=jQuery(i).selectWoo({data:a}),void 0!==n["font-backup"]&&e.val(n["font-backup"].replace(/'/g,'"')).trigger("change"),e.on("change",function(){t.saveValue("font-backup",jQuery(this).val())})):jQuery(t.selector+" .font-backup").hide()},renderVariantSelector:function(){var e,t,i,a=this,n=a.setting._value,r=n["font-family"],o=a.selector+" .variant select",s=[],l=!1,c=kirki.util.webfonts.getFontType(r),u=["","regular","italic","700","700italic"];if("google"===c&&(u=kirki.util.webfonts.google.getVariants(r)),_.isUndefined(a.params)||_.isUndefined(a.params.choices)||_.isUndefined(a.params.choices.fonts)||_.isUndefined(a.params.choices.fonts.variants)||_.isUndefined(a.params.choices.fonts.variants[r])||(u=a.params.choices.fonts.variants[r]),kirkiL10n.isScriptDebug&&(console.info('Kirki Debug: Font variants for font-family "'+r+'":'),console.info(u)),"inherit"!==r&&"initial"!==r&&""!==r||(n.variant="inherit",u=[""],jQuery(a.selector+" .variant").hide()),u.length<=1)return jQuery(a.selector+" .variant").hide(),n.variant=u[0],a.saveValue("variant",n.variant),""!==n.variant&&n.variant?(e=_.isString(n.variant)?n.variant.match(/\d/g):"400",e=_.isObject(e)?e.join(""):"400",i=n.variant&&-1!==n.variant.indexOf("italic")?"italic":"normal"):i=e="",a.saveValue("font-weight",e),void a.saveValue("font-style",i);jQuery(a.selector+" .font-backup").show(),jQuery(a.selector+" .variant").show(),_.each(u,function(e){n.variant===e&&(l=!0),s.push({id:e,text:e})}),l||(n.variant="regular"),jQuery(o).hasClass("select2-hidden-accessible")&&(jQuery(o).selectWoo("destroy"),jQuery(o).empty()),(t=jQuery(o).selectWoo({data:s})).val(n.variant).trigger("change"),t.on("change",function(){a.saveValue("variant",jQuery(this).val()),"string"!=typeof n.variant&&(n.variant=u[0]),e=_.isString(n.variant)?n.variant.match(/\d/g):"400",e=_.isObject(e)?e.join(""):"400",i=-1!==n.variant.indexOf("italic")?"italic":"normal",a.saveValue("font-weight",e),a.saveValue("font-style",i)})},getFonts:function(){var e=this,t=kirki.util.webfonts.google.getFonts(),i={},a="alpha",n=0,r={};return _.isEmpty(e.params.choices.fonts.google)?i=kirki.util.webfonts.google.getFonts(a,"",n):"alpha"===e.params.choices.fonts.google[0]||"popularity"===e.params.choices.fonts.google[0]||"trending"===e.params.choices.fonts.google[0]?(a=e.params.choices.fonts.google[0],isNaN(e.params.choices.fonts.google[1])||(n=parseInt(e.params.choices.fonts.google[1],10)),i=kirki.util.webfonts.google.getFonts(a,"",n)):_.each(e.params.choices.fonts.google,function(e){void 0===t[e]||_.isEmpty(t[e])||(i[e]=t[e])}),_.isEmpty(e.params.choices.fonts.standard)?_.each(kirki.util.webfonts.standard.fonts,function(e,t){r[t]={family:e.stack,label:e.label}}):_.each(e.params.choices.fonts.standard,function(e){void 0===kirki.util.webfonts.standard.fonts[e]||_.isEmpty(kirki.util.webfonts.standard.fonts[e])?r[e]={family:e,label:e}:(r[e]={},"undefined"===kirki.util.webfonts.standard.fonts[e].stack||_.isEmpty(kirki.util.webfonts.standard.fonts[e].stack)?r[e].family=i[e]:r[e].family=kirki.util.webfonts.standard.fonts[e].stack,"undefined"===kirki.util.webfonts.standard.fonts[e].label||_.isEmpty(kirki.util.webfonts.standard.fonts[e].label)?_.isEmpty(r[e])||(r[e].label=r[e]):r[e].label=kirki.util.webfonts.standard.fonts[e].label)}),{google:i,standard:r}},localFontsCheckbox:function(){var e=this,t=(e.container.find(".kirki-host-font-locally"),e.container.find(".kirki-host-font-locally input")),i=jQuery(t).is(":checked");e.setting._value&&e.setting._value.downloadFont&&jQuery(t).attr("checked","checked"),jQuery(t).on("change",function(){i=jQuery(t).is(":checked"),e.saveValue("downloadFont",i)})},initValue:function(){var t=this,i=t.params.default,a=t.setting._value;t.value={use_media_queries:a.use_media_queries||!1,loaded:!_.isUndefined(a),global:t.defaultValue(),desktop:t.defaultValue(),tablet:t.defaultValue(),mobile:t.defaultValue()},t.value=t.defaultGlobalValue(t.value),a.use_media_queries?(kirki.util.media_query_device_names.forEach(function(e){!t.value[e].loaded&&a[e]&&(t.value[e]=a[e],t.value[e].loaded=!0)}),a.desktop&&(t.value.global=t.value.desktop)):!t.value.global.loaded&&a.global&&(t.value.global=a.global,t.value.global.loaded=!0);var n=t.value.use_media_queries?"desktop":"global";t.global_types.forEach(function(e){if(_.isUndefined(i[e]))return!1;switch(t.value[e]=t.value.loaded?a[e]:i[e],e){case"font-family":case"font-backup":case"variant":case"text-transform":t.container.find("div.font-family select,div.font-backup select,div.variant select,div.text-transform select").val(t.value[e]);break;case"text-align":t.container.find('div.text-align input[value="'+value+'"]').prop("checked",!0);break;default:t.container.find("div."+e+" input").val(t.value[e])}}),t.media_query_types.forEach(function(e){if(_.isUndefined(i[e]))return!1;switch(t.value[n][e]=t.value[n].loaded?a[n][e]:i[e],e){case"font-family":case"font-backup":case"variant":case"text-transform":t.container.find("div.font-family select,div.font-backup select,div.variant select,div.text-transform select").val(t.value[n][e]);break;case"text-align":t.container.find('div.text-align input[value="'+value+'"]').prop("checked",!0);break;default:t.container.find("div."+e+" input").val(t.value[n][e])}}),t.value.downloadFont=a.downloadFont||!1},initMediaQueries:function(){var r=this;r.params.use_media_queries&&kirki.util.helpers.media_query(r,r.value.use_media_queries,{device_change:function(e,t){r.selected_device=t,r.value.use_media_queries=e;var i=r.getSelectedDeviceName();e&&!r.initial_media_query&&kirki.util.media_query_device_names.forEach(function(e){r.value[e]||(r.value[e]=r.defaultValue())}),e?r.value.desktop=r.value.global:r.value.global=r.value.desktop;var a=r.value[i],n=r.params.default;r.media_query_types.forEach(function(e){if(_.isUndefined(n[e]))return!1;var t=a[e];r.container.find("div."+e+" input").val(t)}),r.save(),r.initial_media_query=!0}})},getSelectedDeviceName:function(){var e="global";return this.selected_device==kirki.util.media_query_devices.desktop?e="desktop":this.selected_device==kirki.util.media_query_devices.tablet?e="tablet":this.selected_device==kirki.util.media_query_devices.mobile&&(e="mobile"),e},saveValue:function(e,t){var i=this.value;this.media_query_types.includes(e)?i[this.getSelectedDeviceName()][e]=t:i[e]=t,this.save()},save:function(){var e=this.container.find(".typography-hidden-value"),t=jQuery.extend({},this.value);delete t.loaded,t.use_media_queries?(delete t.global,delete t.desktop.loaded,delete t.tablet.loaded,delete t.mobile.loaded):(delete t.global.loaded,delete t.desktop,delete t.tablet,delete t.mobile),e.attr("value",JSON.stringify(t)).trigger("change"),this.setting.set(t)},defaultValue:function(){var t=this,i={loaded:!1};return t.media_query_types.forEach(function(e){if(_.isUndefined(t.params.default[e]))return!1;i[e]=""}),i},defaultGlobalValue:function(t){var i=this;return i.global_types.forEach(function(e){if(_.isUndefined(i.params.default[e]))return!1;t[e]=""}),t["font-weight"]="",t["font-style"]="",t.variant="",t.downloadFont=!1,t["text-align"]="left",t}});